<h1>Analytics</h1>
<div class="analytics-page">
  <% if user_signed_in? %>
    <div class="analytics-form">
      <%= form_with url: analytics_path, method: :get, class: "a-form col-1 " do %>
        <%= label_tag "period", "Period(months)" %>
        <div class="a-input">
          <%= select_tag :period, options_for_select([[1], [3],[6],[9],[12]]), class: "form-control" %>
          <%= submit_tag "Submit", name: "", class: "a-submit" %>
        </div>
      <% end %>
      <h3>Last <%= @days %> days: <span>Â£<%=@total%> </span></h3>
    </div>
    <div class="analytics-container">
      <div class="area-chart">
        <%= area_chart Transaction.group_by_day(:date, range: @range).sum(:amount), height: "500px" %>
        <%= render 'transactions/transactions' %>
      </div>

      <div class="pie-chart">
        <h3>Monthly Spend by category </h3>
        <%= pie_chart Category.group(:name).sum(:monthly_spend), height: "500px", library: { title: { text: "Monthly Spend by Category", x: -20 } } %>
      </div>
    </div>
  <% end %>
</div>
